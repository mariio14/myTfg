DROP TABLE IF EXISTS Imagen;
DROP TABLE IF EXISTS Post;
DROP TABLE IF EXISTS Users;

CREATE TABLE Users (
   id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
   userName VARCHAR(60) NOT NULL,
   password VARCHAR(60) NOT NULL,
   firstName VARCHAR(60) NOT NULL,
   lastName VARCHAR(60) NOT NULL,
   email VARCHAR(60) NOT NULL,
   role TINYINT NOT NULL
);

CREATE TABLE Post (
   id BIGINT NOT NULL AUTO_INCREMENT,
   titulo VARCHAR(255) NOT NULL,
   descripcion TEXT,
   URL VARCHAR(255) NOT NULL,
   categoria VARCHAR(255) NOT NULL,
   precio DECIMAL(10, 2) NOT NULL,
   userId BIGINT NOT NULL,
   CONSTRAINT PostPK PRIMARY KEY (id),
   CONSTRAINT PostUserIdFK FOREIGN KEY(userId)
       REFERENCES Users(id)
);

CREATE TABLE Imagen (
    id BIGINT NOT NULL AUTO_INCREMENT,
    imagen BLOB NOT NULL,
    postId BIGINT NOT NULL,
    CONSTRAINT ImagenPK PRIMARY KEY (id),
    CONSTRAINT ImagenPostIdFK FOREIGN KEY(postId)
        REFERENCES Post(id)
);
